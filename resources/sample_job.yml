sample_cluster: &sample_cluster
  new_cluster:
    num_workers: 0
    spark_version: 14.3.x-gpu-ml-scala2.12
    node_type_id: Standard_NC4as_T4_v3 
    driver_node_type_id: Standard_NC4as_T4_v3

targets:
  uat_env:
    resources:
      jobs:
        sample_job:
          job_clusters:
            - job_cluster_key: sample_cluster
              <<: *sample_cluster
          tasks:
            - task_key: sample_task
              job_cluster_key: sample_cluster

  prod_env:
    resources:
      jobs:
        sample_job:
          job_clusters:
            - job_cluster_key: sample_cluster
              <<: *sample_cluster
          tasks:
            - task_key: sample_task
              job_cluster_key: sample_cluster

resources:
  jobs:
    sample_job:
      name: ${var.env}_sample_job
      #job_clusters: Undefined here to use serverless by default for dev
      tasks:       
        - task_key: sample_task
          #job_cluster_key: Undefined here to use serverless by default for dev
          notebook_task:
            notebook_path: ../setup_tables.sql
            base_parameters:
              ENV: ${var.env}
              USER: ${workspace.current_user.userName}
              